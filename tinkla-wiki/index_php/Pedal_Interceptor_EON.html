<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>Pedal Interceptor EON - Tinkla: Tinkering with Tesla</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Pedal_Interceptor_EON","wgTitle":"Pedal Interceptor EON","wgCurRevisionId":1345,"wgRevisionId":1345,"wgArticleId":210,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages with syntax highlighting errors"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Pedal_Interceptor_EON","wgRelevantArticleId":210,"wgRequestId":"3bfecacf5d4afd4d0ccf7da7","wgCSPNonce":false,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}","wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgWikiEditorEnabledModules":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","ext.pygments":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.toc.styles":"ready","mediawiki.skinning.content.externallinks":"ready","skins.timeless":"ready","skins.timeless.misc":"ready"});mw.loader.implement("user.tokens@0tffind",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.user","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","mmv.head","mmv.bootstrap.autostart","skins.timeless.js","skins.timeless.mobile"];mw.loader.load(RLPAGEMODULES);});</script>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.toc.styles%7Cskins.timeless%7Cskins.timeless.misc&amp;only=styles&amp;skin=timeless" rel="stylesheet"/>
<script async="" src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=timeless"></script>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=timeless" rel="stylesheet"/>
<meta content="MediaWiki 1.32.1" name="generator"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0" name="viewport"/>
<link href="/favicon.ico" rel="shortcut icon"/>
<link href="/opensearch_desc.php" rel="search" title="Tinkla: Tinkering with Tesla (en)" type="application/opensearchdescription+xml"/>
<link href="https://tinkla.us/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="Tinkla: Tinkering with Tesla Atom feed" type="application/atom+xml"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Timeless&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pedal_Interceptor_EON rootpage-Pedal_Interceptor_EON skin-timeless action-view"><div id="mw-wrapper"><div class="ts-container" id="mw-header-container"><div class="ts-inner" id="mw-header"><div id="user-tools"><div id="personal"><h2><span>Anonymous</span><div class="pokey"></div></h2><div class="dropdown" id="personal-inner"><div aria-labelledby="p-personal-label" class="mw-portlet" id="p-personal" role="navigation"><h3 dir="ltr" id="p-personal-label" lang="en">Not logged in</h3><div class="mw-portlet-body"><ul><li id="pt-createaccount"><a href="index.php" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login"><a accesskey="o" href="index.php" title="You are encouraged to log in; however, it is not mandatory [o]"><span>Log in</span></a></li></ul></div></div></div></div></div><div class="mw-portlet" id="p-logo-text" role="banner"><a class="mw-wiki-title long" href="index_php/Main_Page.html" id="p-banner">Tinkla: Tinkering with Tesla</a></div><div class="mw-portlet" id="p-search"><h3 dir="ltr" lang="en"><label for="searchInput">Search</label></h3><form action="/index.php" id="searchform"><div id="simpleSearch"><div id="searchInput-container"><input accesskey="f" id="searchInput" name="search" placeholder="Search Tinkla: Tinkering with Tesla" title="Search Tinkla: Tinkering with Tesla [f]" type="search"/></div><input name="title" type="hidden" value="Special:Search"/><input class="searchButton mw-fallbackSearchButton" id="mw-searchButton" name="fulltext" title="Search the pages for this text" type="submit" value="Search"/><input class="searchButton" id="searchButton" name="go" title="Go to a page with this exact name if it exists" type="submit" value="Go"/></div></form></div></div><div class="visualClear"></div></div><div class="color-bar" id="mw-header-hack"><div class="color-middle-container"><div class="color-middle"></div></div><div class="color-left"></div><div class="color-right"></div></div><div id="mw-header-nav-hack"><div class="color-bar"><div class="color-middle-container"><div class="color-middle"></div></div><div class="color-left"></div><div class="color-right"></div></div></div><div id="menus-cover"></div><div class="ts-container" id="mw-content-container"><div class="ts-inner" id="mw-content-block"><div id="mw-content-wrapper"><div id="mw-content"><div class="mw-body" id="content" role="main"><div class="mw-indicators mw-body-content">
</div>
<h1 class="firstHeading" id="firstHeading">Pedal Interceptor EON</h1><div id="siteSub">From Tinkla: Tinkering with Tesla</div><div id="mw-page-header-links"><div aria-labelledby="p-namespaces-label" class="mw-portlet" id="p-namespaces" role="navigation"><h3 dir="ltr" id="p-namespaces-label" lang="en">Namespaces</h3><div class="mw-portlet-body"><ul><li class="selected" id="ca-nstab-main"><a accesskey="c" href="index_php/Pedal_Interceptor_EON.html" title="View the content page [c]"><span>Page</span></a></li><li class="new" id="ca-talk"><a accesskey="t" href="/index.php?title=Talk:Pedal_Interceptor_EON&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]"><span>Discussion</span></a></li></ul></div></div><div aria-labelledby="p-more-label" class="mw-portlet" id="p-more" role="navigation"><h3 dir="ltr" id="p-more-label" lang="en">More</h3><div class="mw-portlet-body"><ul><li class="dropdown-toggle" id="ca-more"><span>More</span></li></ul></div></div><div aria-labelledby="p-views-label" class="mw-portlet" id="p-views" role="navigation"><h3 dir="ltr" id="p-views-label" lang="en">Page actions</h3><div class="mw-portlet-body"><ul><li class="selected" id="ca-view"><a href="index_php/Pedal_Interceptor_EON.html" redundant="1"><span>View</span></a></li><li id="ca-viewsource"><a accesskey="e" href="/index.php?title=Pedal_Interceptor_EON&amp;action=edit" title="This page is protected.
You can view its source [e]"><span>View source</span></a></li><li id="ca-history"><a accesskey="h" href="index.php" title="Past revisions of this page [h]"><span>History</span></a></li><li id="ca-myact"><a href="index.php"><span>My action</span></a></li></ul></div></div></div><div class="visualClear"></div><div class="mw-body-content" id="bodyContent"><div id="contentSub"></div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p>The Comma Pedal is used to provide advanced acceleration and regen braking capability on Tesla cars running Openpilot that do not have iBooster installed.
</p>
<pre>Without electric brakes (iBooster) the car only uses regenerative braking. This is not enough for sudden slowdowns. YOU MUST BE READY TO MANUALLY BRAKE AT ANY MOMENT.
</pre>
<div class="floatright"><a class="image" href="index_php/File_Pedal.jpg"><img alt="Pedal.jpg" class="thumbborder" data-file-height="2000" data-file-width="1809" height="332" src="images/thumb/0/06/Pedal_jpg/300px-Pedal.jpg" srcset="/images/thumb/0/06/Pedal.jpg/450px-Pedal.jpg 1.5x, /images/thumb/0/06/Pedal.jpg/600px-Pedal.jpg 2x" width="300"/></a></div>
<div class="toc" id="toc"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">1</span> <span class="toctext">What it Does</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">2</span> <span class="toctext">Obtaining a Comma Pedal</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">3</span> <span class="toctext">Wiring a Tesla Pedal</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">4</span> <span class="toctext">Connecting the Pedal for Old EON with Giraffe or Harness</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">5</span> <span class="toctext">Installing the Tesla Pedal for old EON setup with Giraffe or Harness</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">6</span> <span class="toctext">Flashing the firmware for Tesla Pedal for older EON versions</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">6.1</span> <span class="toctext">Step 1: Get the code</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">6.2</span> <span class="toctext">Step 2: Prepare your hardware</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">6.3</span> <span class="toctext">Step 3.1: Flashing via CAN</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">6.4</span> <span class="toctext">Step 3.2: Flashing via USB</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Step_4:_Cleanup"><span class="tocnumber">6.5</span> <span class="toctext">Step 4: Cleanup</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="index_php/Pedal_Interceptor_EON.html"><span class="tocnumber">7</span> <span class="toctext">Using the Tesla Pedal</span></a></li>
</ul>
</div>
<h3><span class="mw-headline" id="What_it_Does">What it Does</span></h3>
<p>The Comma Pedal is an accelerator pedal interceptor. It is a device that is inserted between a car's electronic accelerator pedal and the DU (Drive Unit). It detects the voltage from the accelerator pedal which represents the pedal's position. It then writes that same voltage back out to the DU as if the accelerator pedal had produced it.
</p><p>The Comma Pedal has 4 main systems:
</p>
<ol><li>2 Analog to Digital Convertors
<ul><li>This is used to read the voltage from the car's accelerator pedal into the Comma Pedal's processor. The accelerator pedal produces an output Voltage between 0 and 5 Volts.</li></ul></li>
<li>2 Digital to Analog Convertors
<ul><li>This is used to send voltage back to the car's DU as if the accelerator pedal had produced it.</li></ul></li>
<li>1 CAN Bus
<ul><li>The CAN Bus is the car's communication network. The Comma Pedal communicates with Openpilot using the CAN Bus. It connects to the Tesla Giraffe on CAN3.</li></ul></li>
<li>1 USB
<ul><li>This is used to program and monitor the Comma Pedal, itself.</li></ul></li></ol>
<p>When Openpilot is NOT engaged, the Comma Pedal reads the voltage from the accelerator pedal and just passes it along to the DU. 
</p><p>When Openpilot IS engaged with <a href="index_php/Longitudinal_Control__ACC.html" title="Longitudinal Control: ACC">longitudinal control</a>, it gets the virtual accelerator pedal position from Openpilot and passes it on to the DU.
</p><p>The Comma Pedal is also constantly sending the physical accelerator pedal's position to the CAN bus for Openpilot to read. This way you can increase speed temporarily without having to adjust max speed or disengage longitudinal control.
</p>
<h3><span class="mw-headline" id="Obtaining_a_Comma_Pedal">Obtaining a Comma Pedal</span></h3>
<p>You cannot buy a pre-built Comma Pedal from Comma. Fortunately there are other people in the community manufacturing and selling them:
</p>
<ul><li><a class="external free" href="https://www.ebay.com/itm/comma-pedal-/224754086101?mkcid=16&amp;mkevt=1&amp;_trksid=p2349624.m46890.l49286&amp;mkrid=711-127632-2357-0" rel="nofollow noreferrer noopener" target="_blank">https://www.ebay.com/itm/comma-pedal-/224754086101?mkcid=16&amp;mkevt=1&amp;_trksid=p2349624.m46890.l49286&amp;mkrid=711-127632-2357-0</a> for the pedal hardware</li>
<li><a class="external free" href="https://www.ebay.com/itm/Tesla-Openpilot-Pedal-Interceptor-Connectors-/124807073952?mkcid=16&amp;mkevt=1&amp;_trksid=p2349624.m46890.l49286&amp;mkrid=711-127632-2357-0" rel="nofollow noreferrer noopener" target="_blank">https://www.ebay.com/itm/Tesla-Openpilot-Pedal-Interceptor-Connectors-/124807073952?mkcid=16&amp;mkevt=1&amp;_trksid=p2349624.m46890.l49286&amp;mkrid=711-127632-2357-0</a> for the Tesla specific connectors</li></ul>
<p>Since they're currently always sold out as soon as new ones get in stock, you could also <a class="external text" href="https://github.com/commaai/neo/tree/master/pedal" rel="nofollow noreferrer noopener" target="_blank">build it yourself</a> (not recommended) or have one <a class="external text" href="https://medium.com/@joshuairl/comma-pedal-building-with-macrofab-6328bea791e8" rel="nofollow noreferrer noopener" target="_blank">fabricated through a service like Macrofab</a>.
</p>
<h3><span class="mw-headline" id="Wiring_a_Tesla_Pedal">Wiring a Tesla Pedal</span></h3>
<div class="floatright"><a class="image" href="index_php/File_Pedal_board.jpg"><img alt="Pedal board.jpg" class="thumbborder" data-file-height="1937" data-file-width="2000" height="291" src="images/thumb/1/1a/Pedal_board_jpg/300px-Pedal_board.jpg" srcset="/images/thumb/1/1a/Pedal_board.jpg/450px-Pedal_board.jpg 1.5x, /images/thumb/1/1a/Pedal_board.jpg/600px-Pedal_board.jpg 2x" width="300"/></a></div>
<p>In order to create your Tesla Pedal you need:
</p>
<ul><li>1x Comma Pedal board (for sources see above section)</li>
<li>1x <a class="external text" href="https://www.amazon.com/LeMotech-Plastic-Electrical-Junction-72x42x23mm/dp/B07F3Y8L95/" rel="nofollow noreferrer noopener" target="_blank">box to hold the board</a> if your Pedal doesn't already have a case (current ones ship with 3D printed cases). You will need to cut some <a href="index_php/File_Pedal_in_box.png" title="File:Pedal in box.png">small openings</a> on the sides (and in front of the RJ45) if you use this one.</li>
<li>1x set of "WPT-929" connectors (actually <a class="external text" href="https://www.molex.com/molex/products/datasheet.jsp?part=active/0314026110_CRIMP_HOUSINGS.xml" rel="nofollow noreferrer noopener" target="_blank">Molex</a>) - <a class="external text" href="https://www.amazon.com/dp/B07GZY4ST4" rel="nofollow noreferrer noopener" target="_blank">fast shipping</a>, <a class="external text" href="https://de.aliexpress.com/item/32778798102.html" rel="nofollow noreferrer noopener" target="_blank">slow shipping</a></li>
<li>~3ft of wire for the connectors in case your Pedal and connectors don't come with them (~AWG24)</li>
<li>1x SN-28B crimping tool (same one as used for EPAS cable - <a class="external text" href="https://www.amazon.com/Wovier-Compression-Ratcheting-0-1-1-0mm2-Wire-electrode/dp/B01CE4FAMW" rel="nofollow noreferrer noopener" target="_blank">fast shipping</a>, <a class="external text" href="https://www.aliexpress.com/item/32843027501.html" rel="nofollow noreferrer noopener" target="_blank">slow shipping</a>)</li>
<li><b>EITHER</b> 1x ethernet cable ~2ft (not crossover) for current gen Pedal and <a href="index_php/Tesla_Giraffe.html" title="Tesla Giraffe">Tesla Giraffe</a> (rev B) which have RJ45 ports</li>
<li><b>OR</b> 1x JST2 male and 1x female connector plus some twisted pair wire if RJ45 is not present. You can <a class="external text" href="https://www.digikey.com/product-detail/en/adafruit-industries-llc/1131/1528-1494-ND/5761282?WT.srch=1&amp;gclid=EAIaIQobChMIjO_5yJyK4gIV1gOGCh1lOAh1EAQYAiABEgLflfD_BwE" rel="nofollow noreferrer noopener" target="_blank">buy this</a> and cut it and you're done (not twisted but will work just fine)</li></ul>
<p><br/>
Use the diagram to connect the female WPT-929 pedal connector to the IN side of the pedal board and the male WSP-929 connector to the OUT side of the pedal connector.
</p>
<div class="floatright"><a class="image" href="index_php/File_Tesla_pedal_wiring.png"><img alt="Tesla pedal wiring.png" class="thumbborder" data-file-height="790" data-file-width="1402" height="186" src="images/thumb/3/3a/Tesla_pedal_wiring_png/330px-Tesla_pedal_wiring.png" srcset="/images/thumb/3/3a/Tesla_pedal_wiring.png/495px-Tesla_pedal_wiring.png 1.5x, /images/thumb/3/3a/Tesla_pedal_wiring.png/660px-Tesla_pedal_wiring.png 2x" width="330"/></a></div>
<div class="floatleft"><a class="image" href="index_php/File_Pedal_connector.png"><img alt="Pedal connector.png" data-file-height="218" data-file-width="302" height="144" src="images/thumb/f/ff/Pedal_connector_png/200px-Pedal_connector.png" srcset="/images/thumb/f/ff/Pedal_connector.png/300px-Pedal_connector.png 1.5x, /images/f/ff/Pedal_connector.png 2x" width="200"/></a></div><p><a class="image" href="index_php/File_Pedal_pinout.png"><img alt="Pedal pinout.png" data-file-height="276" data-file-width="755" height="146" src="images/thumb/3/35/Pedal_pinout_png/400px-Pedal_pinout.png" srcset="/images/thumb/3/35/Pedal_pinout.png/600px-Pedal_pinout.png 1.5x, /images/3/35/Pedal_pinout.png 2x" width="400"/></a>
</p><p><br/>
</p>
<h3><span class="mw-headline" id="Connecting_the_Pedal_for_Old_EON_with_Giraffe_or_Harness">Connecting the Pedal for Old EON with Giraffe or Harness</span></h3>
<p>Connecting the CAN BUS from the Pedal to the <a href="index_php/Tesla_Giraffe.html" title="Tesla Giraffe">Giraffe</a> depends on your setup, as explained in the parts list above.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:265px;"><a class="image" href="index_php/File_Pedal_CAN_connection.png"><img alt="Pedal CAN connection.png" class="thumbimage" data-file-height="141" data-file-width="263" height="141" src="images/6/64/Pedal_CAN_connection.png" width="263"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="index_php/File_Pedal_CAN_connection.png" title="Enlarge"></a></div></div></div></div>
<dl><dd>Via RJ45: Plug in the ethernet cable into the RJ45 port of the Pedal and the other end into the RJ45 port of the Giraffe that is labelled with "comma".</dd>
<dd>Via JST2: Solder positions 3 and 6 of the fake-ethernet port of the Pedal board to the two JST2 connectors (male and female) with enough length to reach EPAS cable/Giraffe. We need both because you will plug the female one in the <a href="index_php/Tesla_Giraffe.html" title="Tesla Giraffe">Giraffe's</a> EPAS connector and then the EPAS Harness into the male JST2. Red should be CAN+ and black should be CAN- (that's the convention also used in the image showing the CAN wire soldered to pins 3 and 6 of the fake ethernet port on the Pedal board).</dd></dl>
<h3><span class="mw-headline" id="Installing_the_Tesla_Pedal_for_old_EON_setup_with_Giraffe_or_Harness">Installing the Tesla Pedal for old EON setup with Giraffe or Harness</span></h3>
<p>To install the Pedal, there are two steps:
</p>
<ol><li>connecting the board to the accelerator pedal</li>
<li>connecting the board to the <a href="index_php/Tesla_Giraffe.html" title="Tesla Giraffe">Tesla Giraffe</a> for old EON</li></ol>
<p>This <a class="external text" href="https://www.youtube.com/watch?v=UiQved6gt2U" rel="nofollow noreferrer noopener" target="_blank">video</a> for a similar product shows you what you have to do in order to install the Pedal interceptor between the accelerator pedal and the car's existing connector. Take your time and watch the video first. The process is not complicated if you just follow it step by step.
</p><p>Once that is complete, connect your ethernet cable to the Pedal and the other end to the Giraffe's RJ45 Port labelled "comma".
</p><p>Older Giraffes and Pedals without RJ45 ports connect over JST2: Disconnect the EPAS cable from the Tesla Giraffe and connect the female JST2 from your Pedal to the Giraffe. Then connect the EPAS cable to the male JST2 from your Pedal.
</p><p>If your Pedal needs to be flashed, don't put your trim back on just yet. Instead connect the Giraffe and Panda to the car and and follow instructions below. This makes it easier to get to the Pedal in case necessary.<br/>
Once you're ready to cover everything up, make sure you don't forget to reconnect the footwell LED and that all your cables are positioned well, so that they don't rub against sharp edges and that there's no tension on them.
</p>
<h3><span class="mw-headline" id="Flashing_the_firmware_for_Tesla_Pedal_for_older_EON_versions">Flashing the firmware for Tesla Pedal for older EON versions</span></h3>
<pre>You have to use a <a class="external text" href="https://github.com/BogGyver/panda/tree/tesla_pedal" rel="nofollow noreferrer noopener" target="_blank">Tesla specific firmware</a> on the Pedal in order to work for Tesla. 
</pre>
<p>You can flash the Pedal directly from the EON, this is why <b>we highly recommend installing the Pedal in your car before flashing (see section above)</b>. If, for whatever reason, you need to flash your Pedal outside the car, use below instructions in conjunction with <a class="external text" href="https://medium.com/@jfrux/flashing-the-comma-pedal-with-ubuntu-a83fb668f6e2" rel="nofollow noreferrer noopener" target="_blank">this guide</a> by <a class="external text" href="https://medium.com/@jfrux" rel="nofollow noreferrer noopener" target="_blank">@jfrux</a>
</p>
<h5><span class="mw-headline" id="Step_1:_Get_the_code">Step 1: Get the code</span></h5>
<p>SSH into your EON, then download our latest Pedal code (use <code class="mw-highlight" dir="ltr">git pull</code> in /data/panda if you already cloned the repo).
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>git clone --depth <span class="m">1</span> https://github.com/BogGyver/panda.git -b tesla_pedal /data/panda
</pre></div>
<h5><span class="mw-headline" id="Step_2:_Prepare_your_hardware">Step 2: Prepare your hardware</span></h5>
<p>Connect your EON to your car (Panda) if not already done. Then press the brake pedal to power up the Pedal.
</p><p>Now kill all OP processes on the EON to free the CAN bus and change to the directory where all flashing related files are located.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>tmux kill-session -t comma
<span class="nb">cd</span> /data/panda/board/pedal
</pre></div>
<h5><span class="mw-headline" id="Step_3.1:_Flashing_via_CAN">Step 3.1: Flashing via CAN</span></h5>
<p>Flashing via CAN<sup>1</sup> is the recommended (easy) way but <b>only possible with Pedals ordered after 7th Sept. 2019</b>. Older Pedals and those built yourself need to follow Step 3.2 instead. They will then also gain the ability to be flashed via CAN for future updates.
</p><p>Run and wait for this command to finish:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>make canflash
</pre></div>
<p>In case flashing is stuck at <code class="mw-highlight" dir="ltr">checking for flasher</code>, press CTRL+C to abort and re run above command. Power cycling Panda by reseating it may also help. If CAN flashing doesn't work for whatever reason you can always try Step 3.2 as a fallback.
</p><p><sup>1</sup> <small>Original resource: <a class="external text" href="https://medium.com/@jfrux/comma-pedal-updating-the-firmware-over-can-fa438a3cf910" rel="nofollow noreferrer noopener" target="_blank">Comma Pedal: Updating the Firmware over CAN</a> by <a class="external text" href="https://medium.com/@jfrux" rel="nofollow noreferrer noopener" target="_blank">@jfrux</a></small>
</p>
<h5><span class="mw-headline" id="Step_3.2:_Flashing_via_USB">Step 3.2: Flashing via USB</span></h5>
<p><b>Flashing via USB involves more steps and is only necessary if flashing via CAN is not possible yet (see explanation in Step 3.1).</b>
</p><p>If you built your Pedal yourself or it was shipped without any firmware, it will boot in DFU mode. To know which mode you're in look at the LED on the Pedal board: no light = DFU mode, slow blink = normal flash mode, fast blink = normal operations.
</p><p>If your Pedal LED is blinking, you can put your Pedal into DFU mode via CAN:
</p>
<dl><dd><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>./enter_canloader.py --recover
</pre></div></dd>
<dd>It's possible that the LED won't turn off on the first try, but usually does so after entering the command a second time*. In case you get an AssertionError, reboot EON and start over from step 2. Also power cycle your Panda by reseating it if the issue persists.</dd></dl>
<p>While in DFU mode, connect your EON via USB to the Pedal (unplug from Panda or use a second USB cable) ensuring that the car does not go in Car Off mode (don't lift your butt off the driver's seat) since Pedal would lose power and therefore also DFU mode.<br/>
Now run this command to flash the bootloader and operational code:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>make recover
</pre></div>
<p>Sometimes you have to issue the command multiple times until it completes successfully. With the updated bootloader you'll be able to flash future updates via CAN.
</p><p>Once done, unplug USB from the Pedal and back into the Panda.
</p><p>* <small>If you can't or don't want to put the Pedal into DFU mode via CAN, you can also do so by <a class="external text" href="https://medium.com/@jfrux/flashing-the-comma-pedal-with-ubuntu-a83fb668f6e2#fcdf" rel="nofollow noreferrer noopener" target="_blank">applying 5 Volt to a special point on the board</a> while connecting it to USB (to power it up). Car must obviously be off or disconnected for this. That usually requires 2 people: one to keep the jumper for 5V in place and the other to connect the USB.</small>
</p>
<h5><span class="mw-headline" id="Step_4:_Cleanup">Step 4: Cleanup</span></h5>
<p>If all went good you can reboot EON to restore the OP processes that were closed in step 2.<br/>
Once the pedal is back in operational mode (rapid LED blinking), PRND letters should be white. If it's not, first try to reboot pedal: Open the driver door while not sitting in the driver seat to make the car go in "Car Off" mode, then step on the brake to turn it back on.<br/>
If you still experience red PRND letters after a successful flash and pedal being in operational mode, it means a bad connection between the car and the accelerator, so check your pedal Molex connectors.
</p>
<h3><span class="mw-headline" id="Using_the_Tesla_Pedal">Using the Tesla Pedal</span></h3>
<pre>Without electric brakes (iBooster) the car only uses regenerative braking. This is not enough for suddent slowdowns. YOU MUST BE READY TO MANUALLY BRAKE AT ANY MOMENT.
</pre>
<p>Out of the box, OP will use the Tesla CC (with stalk spamming) to control CC. This in our OP implementation is called Adaptive Cruise Control or ACC. CC on Tesla only works above 18 MPH (29 km/h).
</p><p>If you turn off the Tesla CC by pressing on the CC stalk, OP will switch to Tesla Pedal mode (PCC). This will provide you with smooth adaptive cruise control by sending the right commands to your Tesla Pedal. Tesla Pedal works down to 1 MPH, but be careful, regen brakes stop working at 5 MPH (8 km/h).
</p>
<!-- 
NewPP limit report
Cached time: 20250429200803
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.046 seconds
Real time usage: 0.939 seconds
Preprocessor visited node count: 120/1000000
Preprocessor generated node count: 214/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 1006/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
<!-- Saved in parser cache with key my_wiki-tesla_:pcache:idhash:210-0!canonical and timestamp 20250429200802 and revision id 1345
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php">https://tinkla.us/index.php?title=Pedal_Interceptor_EON&amp;oldid=1345</a>"</div>
<div class="visualClear"></div></div></div></div><div id="content-bottom-stuff"><div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a href="index_php/Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a class="new" href="index.php" title="Category:Pages with syntax highlighting errors (page does not exist)">Pages with syntax highlighting errors</a></li></ul></div></div></div></div><div id="mw-site-navigation"><div class="mw-portlet" id="p-logo" role="banner"><a class="mw-wiki-logo" href="index_php/Main_Page.html" title="Visit the main page"></a></div><div class="sidebar-chunk" id="site-navigation"><h2><span>Navigation</span><div class="pokey"></div></h2><div class="sidebar-inner"><div aria-labelledby="p-Navigation-label" class="mw-portlet" id="p-Navigation" role="navigation"><h3 dir="ltr" id="p-Navigation-label" lang="en">Navigation</h3><div class="mw-portlet-body"><ul><li id="n-Tinkla-Main-Page"><a href="t/index.php" rel="nofollow" target="_blank"><span>Tinkla Main Page</span></a></li><li id="n-Tinkla-Wiki-Main-Page"><a href="index_php/Main_Page.html"><span>Tinkla Wiki Main Page</span></a></li></ul></div></div><div aria-labelledby="p-Tesla_Unity-label" class="mw-portlet" id="p-Tesla_Unity" role="navigation"><h3 dir="ltr" id="p-Tesla_Unity-label" lang="en">Tesla Unity</h3><div class="mw-portlet-body"><ul><li id="n-Overview"><a href="index_php/Comma_devkit.html"><span>Overview</span></a></li><li id="n-Installing"><a href="index_php/Comma_devkit.html"><span>Installing</span></a></li><li id="n-Config"><a href="index_php/Tesla_Unity_Configuration.html"><span>Config</span></a></li></ul></div></div><div aria-labelledby="p-Tesla_OP_for_EON-label" class="mw-portlet" id="p-Tesla_OP_for_EON" role="navigation"><h3 dir="ltr" id="p-Tesla_OP_for_EON-label" lang="en">Tesla OP for EON</h3><div class="mw-portlet-body"><ul><li id="n-Overview"><a href="index_php/EON.html"><span>Overview</span></a></li><li id="n-Installing"><a href="index_php/EON.html"><span>Installing</span></a></li><li id="n-Config"><a href="index_php/OpenPilot_Configuration_File.html"><span>Config</span></a></li></ul></div></div><div aria-labelledby="p-Tesla_Cars-label" class="mw-portlet" id="p-Tesla_Cars" role="navigation"><h3 dir="ltr" id="p-Tesla_Cars-label" lang="en">Tesla Cars</h3><div class="mw-portlet-body"><ul><li id="n-preAP"><a href="index_php/OpenPilot_for_preAP_Tesla_ModelS.html"><span>preAP</span></a></li><li id="n-AP1"><a href="index_php/OpenPilot_for_Tesla_Model_S/X_with_AP1.html"><span>AP1</span></a></li><li id="n-AP2"><a href="index_php/OpenPilot_for_Tesla_Model_S/X_with_AP2.html"><span>AP2</span></a></li></ul></div></div><div aria-labelledby="p-Integration-label" class="mw-portlet" id="p-Integration" role="navigation"><h3 dir="ltr" id="p-Integration-label" lang="en">Integration</h3><div class="mw-portlet-body"><ul><li id="n-preAP-IC-Integration"><a href="index_php/PreAP__IC_Integration_with_OP.html"><span>preAP IC Integration</span></a></li></ul></div></div><div aria-labelledby="p-Components-label" class="mw-portlet" id="p-Components" role="navigation"><h3 dir="ltr" id="p-Components-label" lang="en">Components</h3><div class="mw-portlet-body"><ul><li id="n-Comma-devkit"><a href="index_php/Comma_devkit.html"><span>Comma devkit</span></a></li><li id="n-EON-.28deprecated.29"><a href="index_php/EON.html"><span>EON (deprecated)</span></a></li></ul></div></div><div aria-labelledby="p-preAP_Components-label" class="mw-portlet" id="p-preAP_Components" role="navigation"><h3 dir="ltr" id="p-preAP_Components-label" lang="en">preAP Components</h3><div class="mw-portlet-body"><ul><li id="n-Tinkla-OBD-C"><a href="index_php/Tinkla_OBD-C_Adapter.html"><span>Tinkla OBD-C</span></a></li><li id="n-Tesla-Radar"><a href="index_php/Tesla_Bosch_Radar.html"><span>Tesla Radar</span></a></li><li id="n-Pedal-Interceptor"><a href="index_php/Pedal_Interceptor.html"><span>Pedal Interceptor</span></a></li><li id="n-Tinkla-Buddy"><a href="index_php/Tinkla_Buddy.html"><span>Tinkla Buddy</span></a></li></ul></div></div><div aria-labelledby="p-AP_Components-label" class="mw-portlet" id="p-AP_Components" role="navigation"><h3 dir="ltr" id="p-AP_Components-label" lang="en">AP Components</h3><div class="mw-portlet-body"><ul><li id="n-AP1-Harness"><a href="index_php/AP1_Harness.html"><span>AP1 Harness</span></a></li><li id="n-AP2-Harness"><a href="index_php/AP2_Harness.html"><span>AP2 Harness</span></a></li><li id="n-Tinkla-Relay"><a href="index_php/Tinkla_Relay.html"><span>Tinkla Relay</span></a></li></ul></div></div><div aria-labelledby="p-Older_Components-label" class="mw-portlet" id="p-Older_Components" role="navigation"><h3 dir="ltr" id="p-Older_Components-label" lang="en">Older Components</h3><div class="mw-portlet-body"><ul><li id="n-Panda"><a href="index_php/Panda.html"><span>Panda</span></a></li><li id="n-Tesla-Giraffe"><a href="index_php/Tesla_Giraffe.html"><span>Tesla Giraffe</span></a></li><li id="n-EPAS-Harness"><a href="index_php/EPAS_harness.html"><span>EPAS Harness</span></a></li><li id="n-OP-Configuration-File"><a href="index_php/OpenPilot_Configuration_File.html"><span>OP Configuration File</span></a></li></ul></div></div><div aria-labelledby="p-Reference-label" class="mw-portlet" id="p-Reference" role="navigation"><h3 dir="ltr" id="p-Reference-label" lang="en">Reference</h3><div class="mw-portlet-body"><ul><li id="n-Disclaimer-and-Licensing"><a href="index_php/Tinkla_General_disclaimer.html"><span>Disclaimer and Licensing</span></a></li><li id="n-AWG-Chart"><a href="index_php/AWG_chart.html"><span>AWG Chart</span></a></li></ul></div></div><div aria-labelledby="p-Other-label" class="mw-portlet" id="p-Other" role="navigation"><h3 dir="ltr" id="p-Other-label" lang="en">Other</h3><div class="mw-portlet-body"><ul><li id="n-Comma.ai"><a href="https://comma.ai" rel="nofollow" target="_blank"><span>Comma.ai</span></a></li><li id="n-GitHub-Repo"><a href="https://github.com/BogGyver/openpilot" rel="nofollow" target="_blank"><span>GitHub Repo</span></a></li></ul></div></div></div></div><div class="sidebar-chunk" id="site-tools"><h2><span>Wiki tools</span><div class="pokey"></div></h2><div class="sidebar-inner"><div aria-labelledby="p-tb-label" class="mw-portlet" id="p-tb" role="navigation"><h3 dir="ltr" id="p-tb-label" lang="en">Wiki tools</h3><div class="mw-portlet-body"><ul><li id="t-specialpages"><a accesskey="q" href="index_php/Special_SpecialPages.html" title="A list of all special pages [q]"><span>Special pages</span></a></li><li id="t-cite"><a href="index.php" title="Information on how to cite this page"><span>Cite this page</span></a></li></ul></div></div></div></div></div><div id="mw-related-navigation"><div class="sidebar-chunk" id="page-tools"><h2><span>Page tools</span><div class="pokey"></div></h2><div class="sidebar-inner"><div aria-labelledby="p-cactions-label" class="mw-portlet" id="p-cactions" role="navigation"><h3 dir="ltr" id="p-cactions-label" lang="en">Page tools</h3><div class="mw-portlet-body"><ul><li id="ca-myact"><a href="index.php"><span>My action</span></a></li></ul></div></div><div aria-labelledby="p-userpagetools-label" class="mw-portlet emptyPortlet" id="p-userpagetools" role="navigation"><h3 dir="ltr" id="p-userpagetools-label" lang="en">Userpage tools</h3><div class="mw-portlet-body"><ul></ul></div></div><div aria-labelledby="p-pagemisc-label" class="mw-portlet" id="p-pagemisc" role="navigation"><h3 dir="ltr" id="p-pagemisc-label" lang="en">More</h3><div class="mw-portlet-body"><ul><li id="t-whatlinkshere"><a accesskey="j" href="index_php/Special_WhatLinksHere/Pedal_Interceptor_EON.html" title="A list of all wiki pages that link here [j]"><span>What links here</span></a></li><li id="t-recentchangeslinked"><a accesskey="k" href="/index.php/Special:RecentChangesLinked/Pedal_Interceptor_EON" rel="nofollow" title="Recent changes in pages linked from this page [k]"><span>Related changes</span></a></li><li id="t-print"><a accesskey="p" href="/index.php?title=Pedal_Interceptor_EON&amp;printable=yes" rel="alternate" title="Printable version of this page [p]"><span>Printable version</span></a></li><li id="t-permalink"><a href="index.php" title="Permanent link to this revision of the page"><span>Permanent link</span></a></li><li id="t-info"><a href="index.php" title="More information about this page"><span>Page information</span></a></li><li id="t-pagelog"><a href="index_php/Special_Log/Pedal_Interceptor_EON.html"><span>Page logs</span></a></li></ul></div></div></div></div><div class="sidebar-chunk" id="catlinks-sidebar"><h2><span>Categories</span><div class="pokey"></div></h2><div class="sidebar-inner"><div class="mw-normal-catlinks" id="sidebar-normal-catlinks"><div aria-labelledby="p-normal-catlinks-label" class="mw-portlet" id="p-normal-catlinks" role="navigation"><h3 dir="ltr" id="p-normal-catlinks-label" lang="en">Categories</h3><div class="mw-portlet-body"><ul><li><a class="new" href="index.php" title="Category:Pages with syntax highlighting errors (page does not exist)">Pages with syntax highlighting errors</a></li></ul></div></div></div></div></div></div><div class="visualClear"></div></div></div><div class="ts-container" id="mw-footer-container"><div class="ts-inner" id="mw-footer"><div dir="ltr" id="footer-bottom" lang="en" role="contentinfo"><div class="footer-icons" id="f-poweredbyico"><a href="//www.mediawiki.org/" target="_blank"><img alt="Powered by MediaWiki" height="31" src="resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88"/></a></div><ul class="footer-places" id="f-list"><li id="lastmod"> This page was last edited on 26 March 2022, at 17:05.</li><li id="privacy"><a href="/index.php/Tinkla:Privacy_policy" title="Tinkla:Privacy policy">Privacy policy</a></li><li id="about"><a href="/index.php/Tinkla:About" title="Tinkla:About">About Tinkla: Tinkering with Tesla</a></li><li id="disclaimer"><a href="index_php/Tinkla_General_disclaimer.html" title="Tinkla:General disclaimer">Disclaimers</a></li></ul><div class="visualClear"></div></div></div></div></div><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.046","walltime":"0.939","ppvisitednodes":{"value":120,"limit":1000000},"ppgeneratednodes":{"value":214,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":1006,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20250429200803","ttl":86400,"transientcontent":false}}});});</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-141390218-1', 'auto');
  ga('send', 'pageview');

</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":3541});});</script></body></html>