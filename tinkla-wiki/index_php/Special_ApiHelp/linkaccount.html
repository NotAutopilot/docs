<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>MediaWiki API help - Tinkla: Tinkering with Tesla</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"Special","wgCanonicalSpecialPageName":"ApiHelp","wgNamespaceNumber":-1,"wgPageName":"Special:ApiHelp","wgTitle":"ApiHelp","wgCurRevisionId":0,"wgRevisionId":0,"wgArticleId":0,"wgIsArticle":false,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":true,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Special:ApiHelp","wgRelevantArticleId":0,"wgRequestId":"08f02198d0e94c16bacbdc88","wgCSPNonce":false,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}","wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgWikiEditorEnabledModules":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.hlist":"ready","mediawiki.apihelp":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.skinning.interface":"ready"});mw.loader.implement("user.tokens@0tffind",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest"];mw.loader.load(RLPAGEMODULES);});</script>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.apihelp%2Chlist%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface&amp;only=styles&amp;skin=apioutput" rel="stylesheet"/>
<script async="" src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=apioutput"></script>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=apioutput" rel="stylesheet"/>
<meta content="MediaWiki 1.32.1" name="generator"/>
<meta content="noindex,nofollow" name="robots"/>
<link href="/favicon.ico" rel="shortcut icon"/>
<link href="/opensearch_desc.php" rel="search" title="Tinkla: Tinkering with Tesla (en)" type="application/opensearchdescription+xml"/>
<link href="https://tinkla.us/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="https://www.mediawiki.org/wiki/Special:MyLanguage/Copyright" rel="license"/>
<link href="/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="Tinkla: Tinkering with Tesla Atom feed" type="application/atom+xml"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Timeless&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns--1 ns-special mw-special-ApiHelp page-Special_ApiHelp rootpage-Special_ApiHelp skin-apioutput action-view">
<div class="mw-body" role="main">
<h1 class="firstHeading">MediaWiki API help</h1>
<div class="mw-body-content">
<div id="mw-content-text"><p>This is an auto-generated MediaWiki API documentation page.
</p><p>Documentation and examples: <a class="external free" href="https://www.mediawiki.org/wiki/API" rel="noreferrer noopener" target="_blank">https://www.mediawiki.org/wiki/API</a>
</p><h2 class="apihelp-header apihelp-module-name" dir="ltr" id="linkaccount" lang="en">action=linkaccount (link)</h2><div class="apihelp-linktrail">(<a class="apihelp-linktrail" dir="ltr" href="index_php/Special_ApiHelp/main.html" lang="en">main</a> | <b dir="ltr" lang="en">linkaccount</b>)</div>
<div class="apihelp-block apihelp-flags"><ul><li><span class="apihelp-flag-writerights">This module requires write rights.</span></li><li><span class="apihelp-flag-mustbeposted">This module only accepts POST requests.</span></li><li><span class="apihelp-source">Source: <span dir="ltr" lang="en">MediaWiki</span></span></li><li><span class="apihelp-license">License: <a href="/index.php/Special:Version/License/MediaWiki" title="Special:Version/License/MediaWiki"><span dir="ltr" lang="en">GPL-2.0-or-later</span></a></span></li></ul></div>
<p>Link an account from a third-party provider to the current user.
</p><p>The general procedure to use this module is:
</p>
<ol><li>Fetch the fields available from <kbd><a href="api.php">action=query&amp;meta=authmanagerinfo</a></kbd> with <kbd>amirequestsfor=link</kbd>, and a <kbd>csrf</kbd> token from <kbd><a href="api.php">action=query&amp;meta=tokens</a></kbd>.</li>
<li>Present the fields to the user, and obtain their submission.</li>
<li>Post to this module, supplying <var>linkreturnurl</var> and any relevant fields.</li>
<li>Check the <samp>status</samp> in the response.
<ul><li>If you received <samp>PASS</samp> or <samp>FAIL</samp>, you're done. The operation either succeeded or it didn't.</li>
<li>If you received <samp>UI</samp>, present the new fields to the user and obtain their submission. Then post to this module with <var>linkcontinue</var> and the relevant fields set, and repeat step 4.</li>
<li>If you received <samp>REDIRECT</samp>, direct the user to the <samp>redirecttarget</samp> and wait for the return to <var>linkreturnurl</var>. Then post to this module with <var>linkcontinue</var> and any fields passed to the return URL, and repeat step 4.</li>
<li>If you received <samp>RESTART</samp>, that means the authentication worked but we don't have a linked user account. You might treat this as <samp>UI</samp> or as <samp>FAIL</samp>.</li></ul></li></ol>
<div class="apihelp-block apihelp-help-urls"><ul><li><a dir="ltr" href="https://www.mediawiki.org/wiki/Special:MyLanguage/API:Linkaccount">https://www.mediawiki.org/wiki/Special:MyLanguage/API:Linkaccount</a></li></ul></div>
<div class="apihelp-block apihelp-parameters"><div class="apihelp-block-head">Parameters:</div><dl><dt><span dir="ltr" lang="en">linkrequests</span></dt><dd class="description"><p>Only use these authentication requests, by the <samp>id</samp> returned from <kbd><a href="api.php">action=query&amp;meta=authmanagerinfo</a></kbd> with <kbd>amirequestsfor=link</kbd> or from a previous response from this module.
</p></dd><dd class="info">Separate values with <kbd>|</kbd> or <a href="/api.php?action=help&amp;modules=main#main.2Fdatatypes">alternative</a>. Maximum number of values is 50 (500 for bots).</dd><dt><span dir="ltr" lang="en">linkmessageformat</span></dt><dd class="description"><p>Format to use for returning messages.
</p></dd><dd class="info">One of the following values: <span dir="auto">html</span>, <span dir="auto">wikitext</span>, <span dir="auto">raw</span>, <span dir="auto">none</span></dd><dd class="info">Default: <span dir="auto">wikitext</span></dd><dt><span dir="ltr" lang="en">linkmergerequestfields</span></dt><dd class="description"><p>Merge field information for all authentication requests into one array.
</p></dd><dd class="info">Type: boolean (<a href="/api.php?action=help&amp;modules=main#main.2Fdatatypes">details</a>)</dd><dt><span dir="ltr" lang="en">linkreturnurl</span></dt><dd class="description"><p>Return URL for third-party authentication flows, must be absolute. Either this or <var>linkcontinue</var> is required.
</p><p>Upon receiving a <samp>REDIRECT</samp> response, you will typically open a browser or web view to the specified <samp>redirecttarget</samp> URL for a third-party authentication flow. When that completes, the third party will send the browser or web view to this URL. You should extract any query or POST parameters from the URL and pass them as a <var>linkcontinue</var> request to this API module.
</p></dd><dt><span dir="ltr" lang="en">linkcontinue</span></dt><dd class="description"><p>This request is a continuation after an earlier <samp>UI</samp> or <samp>REDIRECT</samp> response. Either this or <var>linkreturnurl</var> is required.
</p></dd><dd class="info">Type: boolean (<a href="/api.php?action=help&amp;modules=main#main.2Fdatatypes">details</a>)</dd><dt><span dir="ltr" lang="en">linktoken</span></dt><dd class="description"><p>A "csrf" token retrieved from <a href="api.php">action=query&amp;meta=tokens</a>
</p></dd><dd class="info">This parameter is required.</dd><dt>*</dt><dd class="description">This module accepts additional parameters depending on the available authentication requests. Use <kbd><a href="api.php">action=query&amp;meta=authmanagerinfo</a></kbd> with <kbd>amirequestsfor=link</kbd> (or a previous response from this module, if applicable) to determine the requests available and the fields that they use.</dd></dl></div>
<div class="apihelp-block apihelp-examples"><div class="apihelp-block-head">Example:</div><dl><dt>Start the process of linking to an account from <kbd>Example</kbd>.</dt><dd><a dir="ltr" href="api.php">api.php?action=linkaccount&amp;provider=Example&amp;linkreturnurl=http://example.org/&amp;linktoken=123ABC</a> <a href="index_php/Special_ApiSandbox.html"><small>[open in sandbox]</small></a></dd></dl></div>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index_php/Special_ApiHelp.html">https://tinkla.us/index.php/Special:ApiHelp</a>"</div>
</div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-141390218-1', 'auto');
  ga('send', 'pageview');

</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":1571});});</script> </body></html>
